% !TEX root = ../paper.tex
\documentclass{standalone}
\input{macros}
\begin{document}
\footnotesize


\[ \inferrule[\texttt{wp\_unop}]{\llbracket\mathit{t.unop}\rrbracket(c) = c' \ast{} \later \Phi(\immV{[\xxWeconstt{t}{c'}]}) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{c}; \xxWunop{t}{\mathit{unop}})}{w, \Phi(w) \ast{} \frameR{F}}} \]


\[ \inferrule[\texttt{wp\_binop}]{
  \llbracket\mathit{t.binop}\rrbracket(c_1,c_2) = c~~\ast~~{\later\,} \Phi({\KK{immV}}\,[\xxWeconstt{t}{c}]) {{\ }~~\ast~~ \frameR{F}}
}{
  \wpre{
    [\xxWeconstt{t}{c_1}; \xxWeconstt{t}{c_2}; \xxWbinop{t}{\mathit{binop}}]
  }{
    \mathit{w}, \Phi(\mathit{w}) \ast{} \frameR{F}
  }
} \]


\[ \inferrule[\texttt{wp\_binop\_failure}]{\llbracket\mathit{t.binop}\rrbracket(c_1,c_2) = {\perp} \ast{}~\later \Phi(\trapV) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{c_1}; \xxWeconstt{t}{c_2}; \xxWbinop{t}{binop})}{w, \Phi(w) \ast{} \frameR{F}}} \]

%\inferrule[\texttt{wp\_relop}]{relop(v_1,v_2) = b \ast{} \later \Phi(\immV{[\xxWeconstt{\xxWithirtytwo}{) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{v_1}; \xxWeconstt{t}{v_2}; \xxWbinop{t}{relop})}{\lambda~v, \Phi(\immV{v}) \ast{} \frameR{F}}}

%\inferrule[\texttt{wp\_testop}]{testop(v_1,v_2) = v' \ast{} \later \Phi(\immV{v'}) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{v_1}; \xxWeconstt{t}{v_2}; \xxWbinop{t}{testop})}{\lambda~v, \Phi(\immV{v}) \ast{} \frameR{F}}}

%\inferrule[\texttt{wp\_cvtop\_convert}]{cvt(t_2, sx, v) = v' \ast{} \xxTypeof{v} = t_1 \ast{} \later \Phi(v') \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t_1}{v}; \xxWcvtopcvt{t_1}{t_2}{sx})}{\lambda~v, \Phi(v) \ast{} \frameR{F}}}
%\rao{Additional numerical rules commented out as it is very repetitive}
(Other numerical rules are similar)

\[ \inferrule[\texttt{wp\_unreachable}]{\later \Phi(\trapV) \ast{} \frameR{F}}{\wpre{(\xxWunreachable)}{w, \Phi(w) \ast{} \frameR{F}}} \]

\[ \inferrule[\texttt{wp\_drop}]{\later \Phi(\immV{[]}) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{c}; \xxWdrop)}{w, \Phi(w) \ast{} \frameR{F}}} \]

\[ \inferrule[\texttt{wp\_nop}]{\later \Phi(\immV{[]}) \ast{} \frameR{F}}{\wpre{(\xxWnop)}{\lambda~w \Phi(w) \ast{} \frameR{F}}} \]

\[ \inferrule[\texttt{wp\_select\_true}]{n \not\eq 0 \ast{} \later \Phi(\immV{[\xxWeconstt{t}{c_1}]}) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{c_1}; \xxWeconstt{t}{c_2}; \xxWeconstt{i32}{n}; \xxWselect)}{w, \Phi(w) \ast{} \frameR{F}}} \]

\[ \inferrule[\texttt{wp\_select\_false}]{n=0 \ast{} \later \Phi(\immV{[\xxWeconstt{t}{c_2}]}) \ast{} \frameR{F}}{\wpre{(\xxWeconstt{t}{c_1}; \xxWeconstt{t}{c_2}; \xxWeconstt{i32}{n}; \xxWselect)}{w, \Phi(w) \ast{} \frameR{F}}} \]


\end{document}
